
<!DOCTYPE html>
<html lang="en-us">

    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta property="og:title" content=" How Google cripples outdated Android devices &middot;  Samuel Debruyn" />
        <meta property="og:site_name" content="Samuel Debruyn" />
        <meta property="og:url" content="https://sa.muel.be/post/how-google-cripples-outdated-android-devices/" />

    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2015-03-23T00:00:00Z" />
        

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@" />
        <meta name="twitter:creator" content="@" />
        <meta name="twitter:title" content="How Google cripples outdated Android devices" />
        <meta name="twitter:description" content="" />
        <meta name="twitter:url" content="https://sa.muel.be/post/how-google-cripples-outdated-android-devices/" />
    

        <title> How Google cripples outdated Android devices &middot;  Samuel Debruyn</title>

    
        <meta name="description" content="" />
    
        
        <meta name="p:domain_verify" content="fc173d84e3a4de948ed4bda2908afd3e"/>
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
          

    
        <link href="https://sa.muel.beindex.xml" rel="alternate" type="application/rss+xml" title="Samuel Debruyn" />
    

    
        <link rel="canonical" href="https://sa.muel.be/post/how-google-cripples-outdated-android-devices/" />

    
    <script type="application/ld+json">
    { 
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "How Google cripples outdated Android devices",
        "author": {
            "@type": "Person",
            "name": "http://profiles.google.com/?rel=author"
        },
        "datePublished": "2015-03-23",
        "description": "",
        "wordCount":  873 
    }
    </script>
    
    
    
    </head>
    <body>
        <header id="header">
            <a id="logo" href="https://sa.muel.be"><img src="https://sa.muel.beavatar.jpg" alt="Samuel Debruyn" /></a>
            <h1><a href="https://sa.muel.be">Samuel Debruyn</a></h1>
            <p></p>

            <div id="follow-icons">
	<a href="http://twitter.com/samueldebruyn" rel="me"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="http://linkedin.com/in/samueldebruyn" rel="me"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="http://github.com/samueldebruyn" rel="me"><i class="fa fa-github-square fa-2x"></i></a>
	<a href="https://sa.muel.beindex.xml" rel="me"><i class="fa fa-rss-square fa-2x"></i></a> 
</div>  
            <h6><a href="https://sa.muel.beabout">About me</a></h6>
        </header>
<main id="content">

<article id="" class="post">
    <div class="post-stamp">
        <time datetime="2015-03-23T00:00:00Z">
            23 Mar 2015
        </time>
    </div>
    <h1 class="post-title">How Google cripples outdated Android devices</h1>
    

<h2 id="why-i-downgraded-my-nexus-5:6c02c6a4dd61b566c2327f4a8035a1d9">Why I downgraded my Nexus 5</h2>

<p>About a year ago Google released <a href="http://developer.android.com/preview/index.html">Android L Developer Preview</a>. This preview of the upcoming Android Lollipop (5.0) release contained a lot of bugs and was definitely not <em>daily driver</em> material.</p>

<p>When Google started updating Nexus devices to the <a href="http://officialandroid.blogspot.be/2014/10/android-be-together-not-same.html">final version of Android Lollipop</a> last autumn, it was clear that not all bugs were gone. Users noticed several bugs of which the <a href="https://code.google.com/p/android/issues/detail?id=79729">memory leak on the Nexus 5</a> was the worst. Power users had to reboot their device every 2 days and other users could go half a week without rebooting. Without a reboot, apps closed automatically a few seconds after opening and background services like Spotify shut down the moment you opened a memory intensive app.</p>

<p>The <a href="http://www.androidpolice.com/2014/12/15/nexus-5-receive-android-5-0-1-today-according-sprint-t-mobile/">Android 5.0.1 update</a> came and went while fixing a few bugs, but the memory leak was still there. Apparently it had something to do with the fade out animation when you turned off your screen.</p>

<p>Then, a few weeks back, Google released Android 5.1. It contained some UI and functional improvements and the memory leak was gone, at last! But don’t start cheering too soon. <a href="http://www.androidpolice.com/2015/03/15/google-android-5-1-memory-leak-has-been-fixed-internally-no-timeline-for-release-yet/">Android 5.1 contained another memory leak</a>. The Android developers already fixed it, but at the time of writing, they still don’t have a timeframe for a release of this fix. The rebooting went on, every other day.</p>

<p>What if you have a car accident and you need to call emergency services?</p>

<blockquote>
<p>Oh no, wait, I have to reboot my phone first.</p>
</blockquote>

<p>This drives me nuts. This seems a critical bug to me. A (smart)phone mustto be able to perform its most basic function all the time: calling.</p>

<p>I considered downgrading while I was on Android 5.0.1, but I quickly delayed this decision when I heard about the upcoming 5.1 update that would fix this memory leak. However, when I started noticing the second memory leak, I had it. Time to go back to the latest stable version: Android 4.4.4 KitKat.</p>

<h2 id="how-i-downgraded:6c02c6a4dd61b566c2327f4a8035a1d9">How I downgraded</h2>

<p>The downgrade was quite simple: I unlocked my phone and flashed the 4.4.4 <a href="https://developers.google.com/android/nexus/images">factory image</a>. The next thing I did was rooting my phone, which later turned out to be necessary.</p>

<h2 id="and-then-it-all-started:6c02c6a4dd61b566c2327f4a8035a1d9">And then it all started</h2>

<p>One of the reasons why I downgraded, was that Android 4.4.4 has remarkably better battery life than Android Lollipop. So when my battery started draining at more than 20% an hour, I knew that something was wrong. Also, the notification about the system update was impossible to remove.</p>

<blockquote>
<p>Yes, Google, I know. Now let me go on with my life, I don’t want your update.</p>
</blockquote>

<h2 id="digging-a-little-deeper:6c02c6a4dd61b566c2327f4a8035a1d9">Digging a little deeper</h2>

<p>Android used to have a service called SystemUpdateService in the Google Services Framework (preinstalled system app) that would handle OS updates. It seems like this was replaced by Google Play Services. The <a href="https://developer.android.com/google/play-services/index.html">Google Play Services</a> app is updated automatically via the Google <a href="https://play.google.com/store/apps/details?id=com.google.android.gms">Play Store</a>. This app contains another SystemUpdateService and disables the SystemUpdateService in the Google Services Framework mentioned earlier.</p>

<p>This service seems to cause a <a href="http://developer.android.com/reference/android/os/PowerManager.WakeLock.html">wakelock</a>, which makes sure that my Nexus 5 never goes to deep sleep. (Deep sleep is like a standby mode with very low power usage.) So there’s my battery drain. But how to stop it? Disabling this service doesn’t help at all. The notification disappears but the wakelock is still there.</p>

<p>Next step: Google and <a href="http://forum.xda-developers.com/google-nexus-5/general/how-to-disable-ota-lollipop-wakelock-t2952845">XDA</a>. I found out about the 3 receivers that trigger this service. Disabling these receivers would make sure that SystemUpdateService never runs and the wakelock is gone.</p>

<p>The receivers are to be found in 3 categories:</p>

<ul>
<li>After startup (runs after booting your device, obviously)</li>
<li>Connectivity changed (runs when the status of your Wi-Fi or cellular data connections change)</li>
<li>Secret code entered (runs when you enter a secret code into the dialer)</li>
</ul>

<p>So yeah, it’s quite impossible to escape from this service. The commands I listed below correctly disable these receivers and related activities. It doesn’t disable the SystemUpdateService itself as this would cause wakelocks. Run them in a terminal on your device or on your PC connected with your phone over <a href="http://developer.android.com/tools/help/adb.html">ADB</a>. Did I mention you need to be <em>rooted</em> to run it?</p>

<pre><code>adb shell su -c pm disable com.google.android.gms/.update.SystemUpdateActivity
adb shell su -c pm disable com.google.android.gms/.update.SystemUpdateService$ActiveReceiver
adb shell su -c pm disable com.google.android.gms/.update.SystemUpdateService$Receiver
adb shell su -c pm disable com.google.android.gms/.update.SystemUpdateService$SecretCodeReceiver
adb shell su -c pm disable com.google.android.gsf/.update.SystemUpdateActivity
adb shell su -c pm disable com.google.android.gsf/.update.SystemUpdatePanoActivity
adb shell su -c pm disable com.google.android.gsf/.update.SystemUpdateService$Receiver
adb shell su -c pm disable com.google.android.gsf/.update.SystemUpdateService$SecretCodeReceiver
</code></pre>

<h2 id="wow-that-was-complicated:6c02c6a4dd61b566c2327f4a8035a1d9">Wow, that was complicated</h2>

<p>For power users this probably wasn’t a lot of work, but this is a real annoyance for regular users. But regular users don’t buy Nexus devices, don’t they?</p>

<p>For years, we all <a href="http://www.google.com/trends/explore#q=android%20fragmentation&amp;cmpt=q">complained about fragmentation</a> and a lack of OS updates. Today it has become impossible to ignore an OS update due to the immense battery drain and the frustrating persistent notification.</p>

<h2 id="this-post-is-all-about-nexus-devices-what-about-my-device:6c02c6a4dd61b566c2327f4a8035a1d9">This post is all about Nexus devices, what about my device?</h2>

<p>Most Android devices come with Google services like the Google Play Store. This means they also come with Google Play Services or the Google Services Framework or both. So, if you ever want to downgrade your Android device to a stock image, be sure to disable those pesky receivers…</p>

    
    <div itemprop="author" itemscope itemtype="http://schema.org/Person">
  <h5>About the author</h5>
  <section>
    <p>Samuel Debruyn is a C# developer who builds RESTful APIs and cross platform apps. <a href="https://sa.muel.beabout">More info</a></p>
  </section>
</div>
</article>  

</main>
		<footer id="footer">
			<section id="footer-message">&copy; Samuel Debruyn. All rights reserved. Source code available on <a href="https://github.com/SamuelDebruyn/samueldebruyn.github.io" target="_blank">GitHub</a>. Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>. <a href="https://github.com/kathyqian/crisp-ghost-theme" target="_blank">Crisp</a> theme by <a href="http://kathyqian.com" target="_blank">Kathy Qian</a>.</section>
		</footer>

    <script>
      (function(c,f){asyncLoader=function(i,h){i.foreach(function(k,j){e(j,d(j),h)});if(typeof h.callback=="function"){var g=setInterval(function(){if(f.readyState==="complete"){clearInterval(g);h.callback()}},10)}};var d=function(g){var h=g.split(".");return h[h.length-1]},e=function(h,i,g){switch(i){case"js":a(h,g);break;case"css":b(h);break;default:break}},a=function(i,h){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=i;document.getElementsByTagName("head")[0].appendChild(g)},b=function(g){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g;document.getElementsByTagName("head")[0].appendChild(h)};Array.prototype.foreach=function(h){for(var g=0;g<this.length;g++){h(g,this[g])}}})(this,document);

      var WebFontConfig={google:{families:["Open Sans:300italic,700italic,300,700","Bree+Serif"]}};
      asyncLoader([
        "//netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.css",
        "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js",
        "//cdnjs.cloudflare.com/ajax/libs/webfont/1.5.16/webfontloader.js",
        "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"
      ],{
        callback:function(){
          asyncLoader([
            "https:\/\/sa.muel.becss/rrssb.css",
            "https:\/\/sa.muel.bejs/gist.min.js", 
            "https:\/\/sa.muel.bejs/rrssb.min.js",
            "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css"
          ], { callback:function() {
              hljs.initHighlighting();
          }});
        }
      });
    </script>
	
	</body>
</html>